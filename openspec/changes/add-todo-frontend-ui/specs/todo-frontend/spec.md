# TODO Frontend UI Specification

## ADDED Requirements

### Requirement: TODO一覧表示

システムはTODO一覧を視覚的に表示する機能を提供しなければなりません(MUST)。

#### Scenario: TODO一覧の初期表示

- **WHEN** ユーザーがホームページにアクセスする
- **THEN** システムはバックエンドAPIからTODO一覧を取得する
- **AND** 取得したTODOをカード形式で一覧表示する
- **AND** 各TODOには、タイトル、ステータス、優先度、期限が表示される

#### Scenario: 空の TODO一覧表示

- **WHEN** ユーザーがホームページにアクセスし、TODOが1件も存在しない
- **THEN** システムは「TODOがありません」というメッセージを表示する

#### Scenario: ローディング状態の表示

- **WHEN** バックエンドAPIからデータを取得中
- **THEN** システムはSkeletonコンポーネントを表示する
- **AND** ユーザーにデータ読み込み中であることを視覚的に示す

#### Scenario: エラー状態の表示

- **WHEN** バックエンドAPIへの接続が失敗する
- **THEN** システムはエラーメッセージを表示する
- **AND** 「再試行」ボタンを表示する

### Requirement: TODO詳細情報の表示

システムは各TODO項目の詳細情報を視覚的に表現しなければなりません(MUST)。

#### Scenario: ステータスの視覚的表現

- **WHEN** TODOのステータスが "pending" の場合
- **THEN** システムはグレーのバッジを表示する

- **WHEN** TODOのステータスが "in-progress" の場合
- **THEN** システムはブルーのバッジを表示する

- **WHEN** TODOのステータスが "completed" の場合
- **THEN** システムはグリーンのバッジを表示する

#### Scenario: 優先度の視覚的表現

- **WHEN** TODOの優先度が "low" の場合
- **THEN** システムはライトブルーのバッジを表示する

- **WHEN** TODOの優先度が "medium" の場合
- **THEN** システムはイエローのバッジを表示する

- **WHEN** TODOの優先度が "high" の場合
- **THEN** システムはレッドのバッジを表示する

#### Scenario: 期限の表示

- **WHEN** TODOに期限が設定されている
- **THEN** システムは期限を相対時間形式で表示する（例: "2日後", "3日前"）

- **WHEN** TODOに期限が設定されていない
- **THEN** システムは期限フィールドを表示しない

### Requirement: ステータスフィルタリング

システムはステータスによるTODOのフィルタリング機能を提供しなければなりません(MUST)。

#### Scenario: ステータスフィルター選択

- **WHEN** ユーザーがステータスフィルターで "pending" を選択する
- **THEN** システムはステータスが "pending" のTODOのみを表示する

#### Scenario: ステータスフィルター解除

- **WHEN** ユーザーがステータスフィルターで "すべて" を選択する
- **THEN** システムはすべてのTODOを表示する

#### Scenario: フィルター状態のURL保存

- **WHEN** ユーザーがステータスフィルターを適用する
- **THEN** システムはフィルター状態をURLのクエリパラメータに保存する
- **AND** ブラウザの戻る/進むボタンでフィルター状態が変更される
- **AND** ページをリロードしてもフィルター状態が保持される

### Requirement: 優先度フィルタリング

システムは優先度によるTODOのフィルタリング機能を提供しなければなりません(MUST)。

#### Scenario: 優先度フィルター選択

- **WHEN** ユーザーが優先度フィルターで "high" を選択する
- **THEN** システムは優先度が "high" のTODOのみを表示する

#### Scenario: 複数フィルターの組み合わせ

- **WHEN** ユーザーがステータスフィルターで "pending" を選択する
- **AND** 優先度フィルターで "high" を選択する
- **THEN** システムはステータスが "pending" かつ優先度が "high" のTODOのみを表示する

#### Scenario: フィルタークリア

- **WHEN** ユーザーが「フィルタークリア」ボタンをクリックする
- **THEN** システムはすべてのフィルターを解除する
- **AND** すべてのTODOを表示する

### Requirement: ソート機能

システムはTODOのソート機能を提供しなければなりません(MUST)。

#### Scenario: 作成日時でソート

- **WHEN** ユーザーがソート項目で「作成日時」を選択する
- **AND** ソート順序で「昇順」を選択する
- **THEN** システムはTODOを作成日時の古い順に表示する

#### Scenario: 期限でソート

- **WHEN** ユーザーがソート項目で「期限」を選択する
- **AND** ソート順序で「昇順」を選択する
- **THEN** システムはTODOを期限の近い順に表示する
- **AND** 期限が設定されていないTODOは最後に表示される

#### Scenario: 優先度でソート

- **WHEN** ユーザーがソート項目で「優先度」を選択する
- **AND** ソート順序で「降順」を選択する
- **THEN** システムはTODOを優先度の高い順（high → medium → low）に表示する

#### Scenario: ソート順序の切り替え

- **WHEN** ユーザーがソート順序を「昇順」から「降順」に変更する
- **THEN** システムはTODOの表示順序を逆転させる

### Requirement: レスポンシブデザイン

システムは様々な画面サイズに対応したレスポンシブデザインを提供しなければなりません(MUST)。

#### Scenario: デスクトップ表示

- **WHEN** ユーザーがデスクトップ（1024px以上）でアクセスする
- **THEN** システムはTODOを2〜3カラムのグリッドレイアウトで表示する
- **AND** フィルターを左側サイドバーに表示する

#### Scenario: タブレット表示

- **WHEN** ユーザーがタブレット（768px〜1023px）でアクセスする
- **THEN** システムはTODOを1〜2カラムのグリッドレイアウトで表示する
- **AND** フィルターを上部に配置する

#### Scenario: モバイル表示

- **WHEN** ユーザーがモバイル（767px以下）でアクセスする
- **THEN** システムはTODOを1カラムのリストレイアウトで表示する
- **AND** フィルターをドロップダウンメニューに配置する

### Requirement: バックエンドAPI統合

システムはバックエンドAPIと統合し、TODOデータを取得しなければなりません(MUST)。

#### Scenario: APIエンドポイントへの接続

- **WHEN** システムがTODO一覧を取得する
- **THEN** バックエンドAPIの `/api/todos` エンドポイントにGETリクエストを送信する
- **AND** フィルター条件をクエリパラメータとして送信する

#### Scenario: API レスポンスの処理

- **WHEN** バックエンドAPIが成功レスポンス（200 OK）を返す
- **THEN** システムはレスポンスボディから `data` フィールドを抽出する
- **AND** TODO配列を状態管理に保存する

#### Scenario: API エラーの処理

- **WHEN** バックエンドAPIがエラーレスポンス（4xx, 5xx）を返す
- **THEN** システムはエラーメッセージを表示する
- **AND** 「再試行」ボタンを表示する

#### Scenario: ネットワークエラーの処理

- **WHEN** バックエンドAPIへの接続が失敗する（ネットワークエラー）
- **THEN** システムは「サーバーに接続できません」というメッセージを表示する
- **AND** 「再試行」ボタンを表示する

### Requirement: データキャッシング

システムはSWRを使用してデータをキャッシュしなければなりません(MUST)。

#### Scenario: データの自動再検証

- **WHEN** ユーザーがページにフォーカスを戻す（別タブから戻る）
- **THEN** システムは自動的にバックエンドAPIからデータを再取得する
- **AND** 新しいデータで表示を更新する

#### Scenario: キャッシュからの即座の表示

- **WHEN** ユーザーが以前訪れたページに戻る
- **THEN** システムはキャッシュされたデータを即座に表示する
- **AND** バックグラウンドでデータを再検証する

### Requirement: ページメタデータ

システムは適切なページメタデータを提供しなければなりません(MUST)。

#### Scenario: ページタイトルの設定

- **WHEN** ユーザーがホームページにアクセスする
- **THEN** ブラウザタブに「TODO List」というタイトルが表示される

#### Scenario: メタデータの設定

- **WHEN** ページが読み込まれる
- **THEN** システムは適切なメタデータ（description, viewport）を設定する
- **AND** モバイルデバイスで適切に表示される

### Requirement: アクセシビリティ

システムは基本的なアクセシビリティ対応を提供しなければなりません(MUST)。

#### Scenario: セマンティックHTML

- **WHEN** ページが表示される
- **THEN** システムはセマンティックHTML要素（header, main, article, button など）を使用する

#### Scenario: キーボード操作

- **WHEN** ユーザーがTabキーを押す
- **THEN** システムはフォーカスを次のインタラクティブ要素に移動する
- **AND** フォーカスが視覚的に表示される

#### Scenario: ARIAラベル

- **WHEN** インタラクティブ要素（ボタン、選択ボックス）が表示される
- **THEN** システムは適切なARIAラベルを提供する
- **AND** スクリーンリーダーで要素の目的が理解できる

### Requirement: パフォーマンス

システムは高速なページロードとレンダリングを提供しなければなりません(MUST)。

#### Scenario: 初期ページロード

- **WHEN** ユーザーが初めてホームページにアクセスする
- **THEN** システムはFirst Contentful Paint（FCP）を2秒以内に完了する
- **AND** Largest Contentful Paint（LCP）を2.5秒以内に完了する

#### Scenario: React Server Components の活用

- **WHEN** ページがサーバー側でレンダリングされる
- **THEN** システムはReact Server Componentsを使用して初期HTMLを生成する
- **AND** JavaScriptバンドルサイズを最小化する

#### Scenario: 画像最適化

- **WHEN** 画像が表示される
- **THEN** システムはNext.js Imageコンポーネントを使用して画像を最適化する
- **AND** 遅延読み込み（lazy loading）を適用する
